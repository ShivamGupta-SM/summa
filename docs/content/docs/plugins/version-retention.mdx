---
title: Version Retention (Removed)
description: This plugin has been removed in v2. Balances are now mutable on the account row — no separate version table exists.
icon: Clock
---

<Callout type="error" title="Removed in v2">
  The version retention plugin has been **removed** as part of the v2 schema redesign. If you are upgrading from v1, you can safely remove this plugin from your configuration.
</Callout>

## Why Was This Removed?

In v1, every balance-mutating operation (credit, debit, transfer, hold commit, freeze, unfreeze) created a new row in the `account_balance_version` table. This append-only design required periodic pruning to keep the table bounded, which was the purpose of this plugin.

In v2, the schema has been redesigned:

- **`account_balance` and `account_balance_version` no longer exist.** There is now a single unified `account` table.
- **Balances are mutable directly on the `account` row**, protected by a checksum for integrity.
- **System accounts** (previously in a separate `system_account` table) are also stored in the unified `account` table with `is_system = true`.
- **Audit history** is preserved through the `entry` table (which replaces `entry_record`, `ledger_event`, and `hot_account_entry`). Entries form a hash chain, providing a complete, tamper-evident record of all balance changes.

Because there is no version table to accumulate unbounded rows, there is nothing to retain or prune.

## Migration from v1

If you are upgrading from v1:

1. Remove `versionRetention()` from your `plugins` array
2. Remove any `advanced.useDenormalizedBalance` configuration (this option has been removed)
3. Run `summa migrate push` to apply the v2 schema — the `account_balance_version` and `account_balance_version_archive` tables will not be created
4. The `entry` table now serves as the authoritative audit trail for all balance changes

## What Replaces It?

- **Balance integrity** is enforced by a checksum on the `account` row rather than version history
- **Audit trail** is provided by the `entry` table with hash chain verification
- **Historical queries** (e.g., "what was the balance at time T?") can be answered by summing entries up to that timestamp via the statements plugin or direct queries against the `entry` table
- For high-volume entry tables, use the [Event Store Partition](/docs/plugins/event-store-partition) plugin to keep the `entry` table efficiently partitioned
